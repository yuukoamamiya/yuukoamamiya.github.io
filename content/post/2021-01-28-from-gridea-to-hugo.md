---
title: 'ä»Grideaè¿ç§»åˆ°Hugo'
date: 2021-01-28 16:52:00+0800
categories:
- æŠ€æœ¯
tags: [åšå®¢]
image: https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210210222138.png
description: æŒç»­é›†æˆï¼Œç‰›é€¼
---

æˆ‘ä¹‹å‰å†™äº†[ä¸€ç¯‡åšæ–‡](https://yuukoamamiya.github.io/p/%E8%AE%B0%E4%B8%80%E6%AC%A1%E6%90%AC%E8%BF%81%E5%8D%9A%E5%AE%A2/)æ¥è®²è¿°æˆ‘ä» blogspot è½¬ç§»åˆ°ç°åœ¨ç”¨çš„ github page ï¼Œé‚£ä¸ªæ—¶å€™ç”¨çš„ç”Ÿæˆå·¥å…·æ˜¯ Gridea ï¼Œæˆ‘ç°åœ¨è¿˜è§‰å¾—é‚£ç©æ„ä¸é”™ï¼Œä»€ä¹ˆéƒ½æ˜¯å‚»ç“œå¼çš„ï¼Œä¹Ÿå°±ç¬¬ä¸€æ¬¡è®¾ç½®çš„æ—¶å€™è¦è·Ÿç€æ•™ç¨‹æ¥ï¼Œéº»çƒ¦ç‚¹ï¼Œè®¾ç½®å¥½ä¹‹åå°±å¯ä»¥çœ‹ç€GUIçš„è„¸è‰²è¡Œäº‹äº†ã€‚

åªä¸è¿‡åæ¥æ˜¯è¶Šç”¨è¶Šè§‰å¾— Gridea æœ‰å„ç§å„æ ·çš„é—®é¢˜ã€‚æˆ‘æœ€è®¨åŒçš„æ¯’ç˜¤æ¡†æ¶è‡ªä¸å¿…è¯´ï¼Œå†™äº†ç¯‡æ–‡ç« è¦ç”Ÿæˆä¸ªåŠå¤©å†åŒæ­¥ä¸ªåŠå¤©ï¼Œè¿˜ç»å¸¸åŒæ­¥ä¸ªåŠå¤©æ²¡èƒ½ push ä¸Šå»ï¼Œå°±ç›¸å½“ç—›è‹¦ã€‚æ­£å¥½è¿™ä¸ªæ—¶å€™æœ‰äº† Github Actions ï¼Œå¦‚æœæ˜¯è‡ªå»ºåšå®¢çš„è¯ä¼ ä¸ªmarkdownæ–‡ä»¶å°±è¡Œï¼Œå‰©ä¸‹çš„éƒ½æ˜¯äº‘ç«¯è‡ªåŠ¨äº†ï¼Œä¹ŸçŠ¯ä¸ç€åœ¨æœ¬åœ°å…ˆæ‰§è¡Œä»€ä¹ˆ `hexo -d` å†æ‰§è¡Œä¸€ä¸‹ `git` ï¼Œæœ€æ—©åˆ¶çº¦æˆ‘å»è‡ªå·±æŠ˜è…¾ hexo ä¸€ç±»å·¥å…·çš„åˆ¶çº¦å·²ç»æ¶ˆå¤±äº†ã€‚

## å®‰è£…Hugo

æˆ‘å¾—è¯´æˆ‘é€‰æ‹© Hugo æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ç†ç”±ï¼Œçº¯ç²¹å°±æ˜¯å•çº¯å›¾ä¸ªè£…èµ·æ¥çœäº‹ã€‚æˆ‘ä¹‹å‰è£…å¥½äº†åŒ…ç®¡ç†å™¨ Chocolatey ï¼Œå†è£… Hugo å°±ä¸€è¡Œå‘½ä»¤çš„äº‹æƒ…ï¼Œè€Œä¸”è£…å¥½äº†ç›´æ¥å°±å·²ç»æ˜¯ç¯å¢ƒå˜é‡äº†ï¼Œå¯ä»¥ç›´æ¥åœ¨å‘½ä»¤è¡Œé‡Œæ‰§è¡Œ `hugo` å‘½ä»¤ï¼Œå¾ˆæ–¹ä¾¿ã€‚

è¦ç´§çš„å‘½ä»¤å°±è¿™ä¹ˆä¸¤è¡Œï¼š

å®‰è£… Chocolatey ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ powershellï¼‰ï¼š

```powershell
Set-ExecutionPolicy Bypass -Scope Process -Force; [System.Net.ServicePointManager]::SecurityProtocol = [System.Net.ServicePointManager]::SecurityProtocol -bor 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))
```

å®‰è£… Hugo

```powershell
choco install hugo-extended
```

è¿™ä¸¤ä¸ªè£…ä¸Šå°±å¤Ÿäº†ï¼Œå½“ç„¶ï¼Œè¦æ˜¯åƒæˆ‘è¿™æ ·æ²¡GUIå°±æµ‘èº«éš¾å—çš„ï¼Œé‚£è¿˜å¯ä»¥å†è£…ä¸ª Chocolatey GUIï¼š

```powershell
choco install chocolateygui
```

è£…åˆ°è¿™é‡Œå°±ç®—æ˜¯è¯¥è£…çš„è½¯ä»¶éƒ½è£…è¿‡ä¸€éäº†ï¼Œé‚£ä¹‹åå°±æ˜¯åšåšå®¢äº†ã€‚

## åˆ›å»ºåšå®¢

Hugo é‡Œé¢æ–°å»ºå·¥ç¨‹çš„å‘½ä»¤æ˜¯

```powershell
hugo new site my_blog
```

åœ¨ä»»æ„ç›®å½•ä¸‹è¿è¡Œï¼Œå°±å¯ä»¥çœ‹åˆ°ç”Ÿæˆäº†ä¸€ä¸ªåä¸º `my_blog` çš„æ–‡ä»¶å¤¹ï¼Œè¿™ä¸ªæ–‡ä»¶å¤¹é‡Œé¢è‡ªå¸¦äº†ä¸€äº›åšå®¢æœ€åŸºæœ¬çš„å†…å®¹ã€‚Hugo æ˜¯ä¸è‡ªå¸¦é»˜è®¤ä¸»é¢˜çš„ï¼Œéœ€è¦å»ä¸‹ä¸€ä¸ªæ¥ã€‚

æˆ‘ä¸‹çš„æ˜¯ [Stack](https://github.com/CaiJimmy/hugo-theme-stack) ä¸»é¢˜ï¼Œè‡ªå¸¦ä¸€ä¸ª[ä¸­æ–‡æ–‡æ¡£](https://docs.stack.jimmycai.com/v/zh-cn/)ï¼Œä¸€æ­¥ä¸€æ­¥ç…§ç€æ–‡æ¡£æ¥å°±è¡Œã€‚ä¸‹è½½æœ€æ–° [Release](https://github.com/CaiJimmy/hugo-theme-stack/releases) ä¹‹åä¸‹ï¼ŒæŠŠ `hugo-theme-stack-master` æ”¹åä¸º `hugo-theme-stack` å¹¶æ”¾åˆ°ç«™ç‚¹ç›®å½•çš„ `theme` æ–‡ä»¶å¤¹ä¸‹ã€‚

æˆ‘è¿™æ˜¯ä¸ªå…¨æ–°çš„åšå®¢ï¼Œå°±å¦‚æ–‡æ¡£æ‰€è¨€ï¼ŒæŠŠ `exampleSite` æ–‡ä»¶å¤¹ä¸­çš„ `assets` å’Œ `config.yaml` ç»™å¤åˆ¶åˆ°åšå®¢æ ¹ç›®å½•ä¸‹ï¼›åšå®¢æ ¹ç›®å½•ä¸‹åŸæœ¬æœ‰ä¸ª `config.toml` ï¼Œç†è®ºä¸Šå¯ä»¥å¯¹ç€è¿™ä¸¤ä¸ªæ–‡ä»¶ä¾æ ·ç”»è‘«èŠ¦è‡ªå·±å†™é…ç½®æ–‡ä»¶ï¼Œä½†æ˜¯è¿˜æ˜¯ç®—äº†ï¼Œå«Œéº»çƒ¦ï¼Œç›´æ¥ç»™åˆ äº†å¾—äº†ã€‚

ä¸è¿‡ç½‘ä¸Šèƒ½æ‰¾åˆ°çš„ä¸€äº›ä¿®æ”¹åŠŸèƒ½çš„æ•™ç¨‹å‡ ä¹éƒ½æ˜¯åŸºäº toml çš„ï¼Œæœ‰æ—¶å€™æŠŠæ ¼å¼æ”¹æˆ yaml ä¿®ä¿®æ”¹æ”¹è¿˜èƒ½ç”¨ï¼Œæœ‰æ—¶å€™å°±ç”¨ä¸äº†ï¼Œå‡‘åˆå‡‘åˆå¾—äº†ï¼Œä¹Ÿä¸ç”¨å¤ªè®²ç©¶ã€‚

ä»¥ä¸‹è®¾ç½®è¿‡ç¨‹ä¸­ï¼Œå…¨ç¨‹æ—¶ä¸æ—¶æ‰“å¼€ `hugo server` çœ‹çœ‹å¯¹åŠ²ä¸å¯¹åŠ²â€¦â€¦

## é…ç½®ä¸»é¢˜

`config.yaml` è¿™ä¸ªæ–‡ä»¶å‡ ä¹æ˜¯å¼€ç®±å³ç”¨çš„ï¼Œä½†è¿˜æ˜¯ä¸å°‘åœ°æ–¹éœ€è¦è‡ªå·±å†è®¾ç½®è¿‡ã€‚

```yaml
params:
    mainSections:
        - post
    featuredImageField: feature
    rssFullContent: false
    favicon: https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210127185955.ico
```

`featuredImageField` å†³å®šçš„æ˜¯ç‰¹è‰²å›¾ç‰‡ï¼ˆé¢˜å›¾ï¼‰ä½¿ç”¨çš„å­—æ®µã€‚é»˜è®¤æ˜¯ image ï¼Œæˆ‘è¿™é‡Œä¿®æ”¹æˆäº† feature ï¼Œå› ä¸ºä» Gridea çš„ post æ–‡ä»¶å¤¹é‡Œæ‹¿å‡ºæ¥çš„æ–‡ä»¶å°±æ˜¯è¿™æ ·çš„ã€‚å½“ç„¶ä¹Ÿå¯ä»¥æ‰¹é‡ä¿®æ”¹ï¼Œç”¨ sublime text å°±å¯ä»¥æŠŠæ•´ä¸ªæ–‡ä»¶å¤¹é‡Œçš„ feature å­—æ®µå…¨éƒ¨æ”¹æˆ image ï¼Œä¸è¿‡æˆ‘å·æ‡’äº†ä¸€æ‰‹ï¼Œè€Œä¸”è¿™ä¹ˆæ”¹ç›®å‰çœ‹ä¸‹æ¥ä¹Ÿæ²¡å‡ºå•¥æ¯›ç—…ã€‚èƒ½ç”¨å°±æˆã€‚

`rssFullContent` å†³å®šçš„æ˜¯ rss æ˜¯å¦è¾“å‡ºå…¨æ–‡ã€‚ `favicon` å†³å®šäº†ç½‘ç«™çš„å›¾æ ‡ï¼Œçœ‹ç€æ”¹å°±è¡Œã€‚

```yaml
sidebar:
        emoji: ğŸ·
        subtitle: è®©æ— ä»·å€¼çš„çµé­‚å»å“­æ³£å§ï¼
        avatar:
            local: true
            src: img/avatar.png
```

ä¸€äº›ä¸ªæ€§åŒ–åšå®¢çš„è®¾ç½®ã€‚æŠŠåšä¸»å¤´åƒæ”¾åœ¨æ ¹ç›®å½•ä¸‹çš„ `assets/img` é‡Œå°±æˆã€‚

```yaml
menu:
        - identifier: link
          name: Link
          url: link
          weight: -50
          pre: link

        - identifier: rss
          name: Rss
          url: index.xml
          weight: -40
          pre: rss
```

ä¸ªæ€§åŒ–èœå•ã€‚

åŸæœ¬çš„å·¦ä¾§èœå•åªæœ‰ä¸»é¡µã€å…³äºã€å­˜æ¡£ã€æœç´¢ï¼Œè¿™å››ä¸ªé€‰é¡¹ã€‚æˆ‘ç»™åŠ äº†å‹é“¾å’Œ rss è®¢é˜…è¿™ä¸¤ä¸ªã€‚

å½“ç„¶è¿™ä¸ªæ—¶å€™èœå•é‡Œé¢çš„ä¸œè¥¿éƒ½æ˜¯ä¸èƒ½ç”¨çš„ï¼Œè¿˜éœ€è¦å†é…ç½®è¿‡ã€‚

è€æ ·å­è¿˜æ˜¯ä»ä½œè€…ç»™çš„ç¤ºèŒƒé‡Œé¢å·æ´»ï¼ŒæŠŠ `exampleSite/content/page` æ•´ä¸ªæ–‡ä»¶å¤¹æ‹·åˆ°æ ¹ç›®å½•çš„ `content` æ–‡ä»¶å¤¹åº•ä¸‹ï¼Œæœç´¢å’Œå­˜æ¡£æ˜¯ç›´æ¥å¯ä»¥ç”¨äº†ã€‚`about.md` è¿™ä¸ªæ–‡ä»¶è¿˜å¾—ä¾æ ·ç”»è‘«èŠ¦è‡ªå·±å†™ç‚¹ä¸œè¥¿ä¸Šå»ï¼ˆæˆ‘ä¹‹å‰ç”šè‡³æƒ³ä¸åˆ°å†™ä»€ä¹ˆå»åˆ«äººåšå®¢é‡Œå·æ´»233ï¼‰ï¼Œ `link.md` ä¹Ÿæ˜¯ä¸€å¾‹ã€‚å¤§ä½¬ä»¬è‡ªç„¶æœ‰åŠæ³•æ‰‹å†™ç‚¹ä»£ç è®©å‹æƒ…é“¾æ¥çš„é¡µé¢å¥½çœ‹ç‚¹ï¼Œæˆ‘æ˜¯ä¸ªç²—äººï¼Œæ‹¿ md éšæ‰‹å†™å†™å·®ä¸å¤šäº†ã€‚rss ç›´æ¥å¯ä»¥ç”¨äº†ï¼Œä¸éœ€è¦å†åˆ›å»ºäº†ã€‚

ä¸è¿‡è¿™é‡Œæœ‰ä¸ªé—®é¢˜æ˜¯ï¼Œç”Ÿæˆçš„ rss è®¢é˜…åœ°å€æ˜¯ `index.xml` è€Œä¸æ˜¯ä»¥å‰çš„ `atom.xml` ï¼Œè¿™å°±æ„å‘³ç€ä»¥å‰çš„ rss è®¢é˜…åœ°å€å°±å¤±æ•ˆäº†ã€‚æˆ‘ä¹Ÿæ²¡ä»€ä¹ˆå¥½åŠæ³•å»è§£å†³ã€‚

```yaml
# Change it to your Disqus shortname before using
disqusShortname: yukoamamiya
```

```yaml
    comments:
        enabled: true
        provider: disqus
```

è¯„è®ºç³»ç»Ÿè®¾ç½® disqus çœäº‹ï¼Œå°±ç›´æ¥ç”¨äº†ã€‚ `disqusShortname` è¿™ä¸ªå±æ€§è®¾ç½®ä¸€ä¸‹å°±è¡Œã€‚

è¿™ä¸ªä¸»é¢˜æ”¯æŒ disqus å’Œ utterances ä¸¤å¥—è¯„è®ºç³»ç»Ÿï¼Œåè€…æ˜¯åŸºäº github issue çš„ï¼Œè¦æ˜¯æˆ‘ä¹‹å‰ gitalk çš„æ•°æ®è¿˜åœ¨æˆ‘å°±ç”¨åè€…äº†ã€‚ä¸è¿‡æ¢æˆ Hugo ä¹‹åé“¾æ¥åœ°å€å…¨å˜äº†ï¼ŒåŸå…ˆçš„ issue ä¹Ÿå°±å¯¹åº”ä¸ä¸Šäº†ï¼Œç®—äº†ç®—äº†ï¼Œå…¨æ‰¬äº†å¾—äº†233

```yaml
permalinks:
    post: /p/:filename/
    page: /:slug/
```

è¿™è¡Œä»£ç å†³å®šçš„æ˜¯ç”Ÿæˆçš„åšæ–‡é¡µé¢çš„ url ã€‚

Gridea çš„é€»è¾‘æ˜¯å–æ–‡ä»¶ååšé“¾æ¥ï¼Œæ¯”å¦‚è¯´ `aigis.md` è¿™ä¸ªæ–‡ä»¶æœ€åç”Ÿæˆçš„é“¾æ¥æ˜¯ `xxx.github.io/post/aigis` ï¼Œè€Œ Hugo çš„é€»è¾‘ï¼Œè‡³å°‘æŒ‰ç…§è¿™ä¸ªä¸»é¢˜åŸæ¥çš„è®¾ç½® `post: /p/:slug/`æ¥è¯´æ˜¯è¯»æ–‡ä»¶çš„å†…å®¹ã€‚å¦‚æœæœ‰åœ¨ Front Matter é‡Œé¢è®¾ç½® `slug` å­—æ®µçš„è¯ï¼Œé‚£å°±è¯»å–è¿™ä¸ªå­—æ®µå¹¶ç”Ÿæˆåœ°å€ï¼Œæ²¡æœ‰çš„è¯å°±è¯» `title` ï¼Œé‚£æˆ‘ä» Gridea åˆšåˆšè½¬è¿‡æ¥çš„ï¼Œå“ªé‡Œä¼šè®¾ç½®è¿™ä¸ªå­—æ®µå˜›ï¼Œç»“æœå°±æ˜¯å‰é¢çš„ `aigis.md` ç”Ÿæˆçš„é“¾æ¥æˆäº† `xxx.github.io/p/åƒå¹´æˆ˜äº‰` ã€‚

æˆ‘æŠŠè¿™æ®µé‡Œé¢çš„ `slug` æ”¹æˆäº† `filename` è¿™ä¸ªé€»è¾‘å°±å’Œ Gridea çš„å¯¹ä¸Šäº†ã€‚å½“ç„¶ï¼Œè¿˜æœ‰ p å’Œ post çš„åŒºåˆ«ï¼Œä¸è¿‡è¿™ä¸ªæˆ‘ä¸æ‰“ç®—æ”¹äº†ã€‚å°±é‚£ä¹ˆå‡ ç¯‡ç‰¹å®šçš„åšæ–‡ç”¨ `aliases` è®¾ç½®ä¸€ä¸‹åˆ«åå°±æˆäº†ã€‚æ¯”å¦‚è¿™æ ·ï¼š

```yaml
aliases:
    - /post/order-44/
```



![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20200429164034.jpg)

åæ­£ SEO ä¹±äº†ä¹Ÿæ²¡ä»€ä¹ˆï¼Œä¼šç‚¹è¿›æ¥çœ‹çš„ä¹Ÿå°±çˆ±çœ‹ä¸ªä»€ä¹ˆ TNO é­”æ€” Order-44 å•Šï¼Œæ€’å–· MIUI å•Šä¹‹ç±»çš„ï¼Œä¹Ÿå°±é‚£ä¹ˆå‡ ç¯‡ï¼Œå°±è¿ç‚¹è¿›æ¥çœ‹æˆ‘ç¿è¯„å¤ªå®°æ²»çš„éƒ½æ²¡å‡ ä¸ªã€‚

[ä¿®æ”¹å­—ä½“](https://docs.stack.jimmycai.com/v/zh-cn/modify-theme/example-custom-font-family-for-article-content)

ä¿®æ”¹å­—ä½“æˆ‘å‡ ä¹æ˜¯ä»æ–‡æ¡£é‡Œé¢ä¸€å­—ä¸è½ç›´æ¥ç…§æ¬äº†ã€‚ä¸è¿‡æˆ‘è‡ªå·±ä¹Ÿç¡®è®¤ä¸äº†æ€æºå®‹ä½“çš„æ•ˆæœï¼Œæˆ‘è¿™è¾¹ç›´æ¥æœ¬åœ°å¼ºåˆ¶æŠŠå­—ä½“æ˜¾ç¤ºæˆ Ubuntu äº†â€¦â€¦

[ç»™åˆ†ç±» / æ ‡ç­¾æ·»åŠ å›¾ç‰‡å’Œç®€ä»‹](https://docs.stack.jimmycai.com/v/zh-cn/writing/gei-fen-lei-biao-qian-tian-jia-tu-pian-he-jian-jie)

åŒæ ·æ˜¯ç…§ç€æ–‡æ¡£æ¥å°±è¡Œã€‚åœ¨ `content/tags/æ ‡ç­¾å` ä¸‹åˆ›å»º `_index.md`ï¼Œç„¶åå†™ç‚¹è¿«çœŸäºŒæ¬¡å…ƒå†…å®¹ã€‚

æ¯”å¦‚ï¼š

```yaml
---
title: "ç§‘æŠ€"
feature: https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128122034.jpg
description: "ä½ çš„XPç³»ç»Ÿæœ‰ç‚¹é—®é¢˜ï¼Œæˆ‘å·²ç»å¸®ä½ é‡è£…å¥½äº†"
---
```

æ˜¾ç¤ºæ•ˆæœæ˜¯è¿™æ ·çš„ï¼š

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128201948.png)

## è¿ç§»åšæ–‡

Gridea çš„åšæ–‡å­˜æ”¾åœ¨å…¶æ•°æ®æ–‡ä»¶å¤¹çš„ `\posts` å­ç›®å½•ä¸‹ï¼Œç›´æ¥æŠŠé‡Œé¢çš„é‚£å †åšæ–‡å¤åˆ¶åˆ° `\content\post` ä¸‹å°±èƒ½ç”¨ã€‚

ä¸¤è€…çš„ Front Matter è¿˜æ˜¯æœ‰äº›åŒºåˆ«çš„ï¼Œæ¯”å¦‚è¯´ Hugo çš„ `hidden: = flase` å¯¹åº”çš„æ˜¯ Gridea çš„ `hideInList: false` ï¼Œä¸è¿‡æ€»ä½“è€Œè¨€å·®åˆ«ä¸å¤§ã€‚è€Œä¸”ä¹Ÿå¯ä»¥ç”¨ sublime text æ‰¹é‡æ”¹æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚

ä¸€ä¸ªæ¯”è¾ƒæ˜æ˜¾çš„åŒºåˆ«åœ¨æ–‡ç« ç®€ä»‹ï¼Œåœ¨è¿™ä¸ªä¸»é¢˜é‡Œé¢åŸºæœ¬å°±æ˜¯å‰¯æ ‡é¢˜ã€‚Hugo çš„æ–‡ç« ç®€ä»‹æ˜¯ç”¨ `description` è¯æ¡å†™çš„ï¼Œè€Œ Gridea çš„åˆ™æ˜¯é  `<!-- more -->` æ‰“æ ‡è®°ã€‚è¿™ä¸ªæ²¡å•¥æ‰¹é‡æ”¹çš„æ³•å­ï¼Œä¹Ÿè®¸å¯ä»¥å†™è„šæœ¬ç¡¬æ”¹ï¼Œä½†æ˜¯æˆ‘è¿™é‡Œæ–‡ç« è™½ç„¶å¤šï¼Œæœ‰å‰¯æ ‡é¢˜çš„ä¹Ÿä¸æ€ä¹ˆå¤šï¼Œå°±ç¡¬æ”¹å¾—äº†ã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128203433.png)

æˆ‘è§‰å¾—æœ€ç‚«çš„æ˜¯è¿™ä¸ªhhhhh

~~ä¸è¿‡è¿™ç¯‡åšæ–‡æ˜¯å¤§ä¸€æ—¶å€™å†™çš„äº†ï¼Œç°åœ¨æˆ‘çœ‹æˆ‘ä¹Ÿæµæ³ªå•Š~~

è¿˜æœ‰ä¸€ä¸ªé‡å¤§çš„é—®é¢˜æ˜¯æ—¶é—´ã€‚

Gridea é‡Œé¢çš„æ—¶é—´æ ¼å¼æ˜¯ `2021-01-28 16:52:00` ï¼Œè€Œ Hugo çš„åˆ™æ˜¯ `2021-01-28 16:52:00+0800` ï¼Œä¸¤è€…å‡ ä¹å®Œå…¨ä¸€æ ·ï¼Œå°±æ˜¯ Hugo çš„åŠ ä¸Šäº†æ—¶åŒºä¿¡æ¯ã€‚

è€çš„åšæ–‡ä¸å†™æ—¶åŒºä¹Ÿæ— æ‰€è°“ï¼Œä½†æ˜¯æ–°çš„åšæ–‡åœ¨å†™çš„æ—¶å€™ä¸€å®šè¦åŠ ä¸Šæ—¶åŒºä¿¡æ¯ã€‚å¦‚æœä¸å†™çš„è¯ï¼ŒHugo ä¼šè®¤ä¸ºè¿™æ˜¯ä¸€ç¯‡å‘å¸ƒæ—¶é—´åœ¨æœªæ¥çš„åšæ–‡è€Œä¸ç»™æ¸²æŸ“â€¦â€¦

## Google Search Console

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128205719.png)

å¦‚æœæ˜¯ç¬¬ä¸€æ¬¡å‘è°·æ­Œæäº¤ç«™ç‚¹çš„è¯ï¼Œè¿™ä¸€æ­¥è¿˜æ˜¯æ”¾åœ¨åé¢ï¼Œç­‰ Github Actions è®¾ç½®å¥½äº†å†å¼„å§ã€‚æˆ‘è¿™é‡Œå› ä¸ºä»¥å‰å°±è®¾ç½®è¿‡ï¼Œç°åœ¨é‡æ–°æäº¤ä¸€ä¸‹ç«™ç‚¹åœ°å›¾å°±æˆã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128210146.png)

ç«™ç‚¹åœ°å›¾çš„æäº¤éœ€è¦æ—¶é—´â€¦â€¦ä¼°è®¡ç°åœ¨åœ¨è°·æ­Œä¸Šæœ TNO æœæ¥æˆ‘åšå®¢çš„ï¼Œæ‘ä¸€ä¸‹è¿˜æ˜¯ä¼šçœ‹404â€¦â€¦

## Google Analytics

ä¸»é¢˜ä½œè€…åœ¨æ–‡æ¡£é‡Œé¢ä¹Ÿ[æäº†ä¸€å˜´](https://docs.stack.jimmycai.com/v/zh-cn/modify-theme)æ€ä¹ˆè®¾ç½®ï¼Œä¸è¿‡æˆ‘è¿˜æ˜¯è·Ÿç€[è¿™ä¸ªæ•™ç¨‹](https://coreychen71.github.io/posts/2019-05/hugoaddgoogleanalytics/)èµ°çš„ã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128211634.png)

æ²¡ç”³è¯·è¿‡ Google Analytics æœåŠ¡çš„å¯ä»¥æ¥ [https://analytics.google.com/analytics/web/?authuser=0#provision/SignUp/](https://analytics.google.com/analytics/web/?authuser=0#provision/SignUp/) å…ˆç”³è¯·ä¸€ä¸ªï¼Œæˆ‘è¿™è¾¹æ˜¯å·²ç»ç”³è¯·å¥½äº†ï¼Œå°±å·®æŠŠä»£ç åµŒåˆ°åšå®¢é‡Œé¢å»äº†ã€‚

é¦–å…ˆæŠŠè·Ÿè¸ª id åŠ åˆ° `config.yaml` é‡Œé¢å»ã€‚ä¸Šé¢å‘çš„é‚£ä¸ªæ•™ç¨‹é‡Œç”¨çš„æ˜¯ toml ï¼Œå’Œ yaml çš„æ ¼å¼ç•¥æœ‰ä¸åŒã€‚

```yaml
googleAnalytics: UA-xxxxxxxxx-x
```

ç„¶åæ˜¯æŠŠ `\themes\hugo-theme-stack\layouts\partials\head\head.html` å¤åˆ¶åˆ°æ ¹ç›®å½•ä¸‹çš„ `\layouts\partials\head\head.html` é‡Œå»ã€‚

åœ¨è¿™ä¸ªæ–‡ä»¶é‡ŒåŠ ä¸Šå››è¡Œï¼š

```html
{{ template "_internal/google_analytics_async.html" . }}
{{ if not .Site.IsServer }}
{{ template "_internal/google_analytics_async.html" . }}
{{ end }}
```

åœ¨ `\layouts` ç›®å½•ä¸‹å»ºç«‹ `_internal` æ–‡ä»¶å¤¹ï¼Œå¹¶ä¸”å†åœ¨å…¶ä¸­åˆ›å»º `google_analytics_async.html ` æ–‡ä»¶ï¼Œç„¶åæŠŠæˆ‘å‰é¢æˆªå›¾é‡Œé¢çš„å…¨å±€ç½‘ç«™ä»£ç ï¼ˆgtag.jsï¼‰å¤åˆ¶è¿›å»å°±æˆã€‚

## è®¾ç½®Github Actions

é¦–å…ˆæ˜¯è¦å‡†å¤‡ `<ä½ çš„githubç”¨æˆ·å>.github.io` ä»“åº“ï¼Œæœ‰ä¸€ä¸ª master åˆ†æ”¯å’Œä¸€ä¸ª gh-pages åˆ†æ”¯ã€‚

ç„¶åæŠŠåˆšåˆšå¼„å‡ºæ¥çš„é‚£å †åšå®¢æ–‡ä»¶æ•´ä¸ªç›®å½•ä¼ åˆ°è¿™ä¸ªä»“åº“çš„ master åˆ†æ”¯ä¸Šå»â€”â€”è¿™ä¸ªæ—¶å€™æ¯”è¾ƒæ ‡å‡†çš„è§£æ³•æ˜¯ `git push` ï¼Œä¸è¿‡æˆ‘èƒ½ä¸ç”¨å‘½ä»¤è¡Œè‚¯å®šä¸ç”¨å‘½ä»¤è¡Œçš„233

æˆ‘åœ¨è¿™ä¸€æ­¥ç”¨çš„æ˜¯ [Github Desktop](https://desktop.github.com/) åº”ç”¨ï¼ˆæ²¡é”™ï¼Œæˆ‘ç”šè‡³è¿ git éƒ½æ²¡è£…ï¼‰ã€‚

è¿™é‡Œè¦æ³¨æ„çš„æ˜¯éœ€è¦è®¾ç½®æ’é™¤ï¼Œæ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ªæ–‡æœ¬æ–‡æ¡£å¹¶é‡å‘½åä¸º `.gitignore` ï¼Œå†™å…¥ä»¥ä¸‹å†…å®¹ï¼š

```
/public/
/themes/*/.git
```

ç„¶åæ˜¯ç”³è¯· tokenï¼Œåœ¨ github ä¸Šä¾æ¬¡ç‚¹å‡» å³ä¸Šè§’ä½ çš„å¤´åƒ - Settings - Developer Settings - Personal access tokensï¼Œç”Ÿæˆä¸€ä¸ªã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128220717.png)

ï¼ˆæˆ‘è¿™é‡Œä¹‹å‰ Gridea æœ¬æ¥å°±è¦ç”¨çš„ï¼Œç›´æ¥ç”¨äº†ä¹‹å‰é‚£ä¸ªï¼‰

è¦æ³¨æ„çš„æ˜¯è¿™ä¸ª token åªä¼šåœ¨è¿™ä¸ªæ—¶å€™ç»™ä½ çœ‹ä¸€æ¬¡ï¼Œä¸¢äº†å°±æ˜¯ä¸¢äº†ï¼Œä»¥åå°±å†ä¹Ÿä¸ä¼šå†å‡ºç°äº†ã€‚æˆ‘æ¨èæŠŠè¿™ä¸ªç»™å­˜åˆ°å¯†ç ç®¡ç†è½¯ä»¶é‡Œé¢å»ï¼Œç”¨ lastpass ä¹‹ç±»çš„è½¯ä»¶ç»™ç®¡ç†èµ·æ¥ã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128223012.png)

å›åˆ° `<ä½ çš„githubç”¨æˆ·å>.github.io` ä»“åº“ï¼Œä¾æ¬¡é€‰æ‹© Settings - Secret ï¼Œæ·»åŠ ä¸€ä¸ªä»“åº“å¯†é’¥åä¸º `personal_token` ï¼Œå†…å®¹æ˜¯åˆšåˆšçš„ token å¤åˆ¶è¿›å»ã€‚

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128223513.png)

å›åˆ°ä»“åº“ï¼Œä¾æ¬¡ç‚¹å‡» Actions - New wordflow - Set up a workflow yourselfï¼Œç„¶åæŠŠè¿™å †æˆ‘ä¹Ÿæ˜¯æŠ„æ¥çš„ä¸€å¤§å¨ä»£ç å¤åˆ¶è¿›å»å°±å¥½äº†ã€‚

```yml
name: Deploy Hugo # ä»»å›å–œæ¬¢

on:
  push:
    branches:
      - master   # master æ›´æ–°è§¦å‘

jobs:
  build-deploy:
    runs-on: ubuntu-18.04
    steps:
      - uses: actions/checkout@v1

      - name: Setup Hugo
        uses: peaceiris/actions-hugo@v2
        with:
          hugo-version: latest

      - name: Build 
        run: hugo

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          personal_token: ${{ secrets.personal_token }} # personal_token
          PUBLISH_BRANCH: gh-pages  # æ¨é€åˆ°å½“å‰ gh-pages åˆ†æ”¯
          PUBLISH_DIR: ./public  # hugo ç”Ÿæˆåˆ° public ä½œä¸ºè·Ÿç›®å½•
          commit_message: ${{ github.event.head_commit.message }}
```

## æ–½å·¥å®Œæ¯•

äº‹æƒ…åˆ°è¿™ä¸€æ­¥ï¼Œå°±ç®—æ˜¯æ–½å·¥å®Œæ¯•äº†ã€‚ä½ å¯ä»¥åœ¨ master åˆ†æ”¯éšä¾¿è¿›è¡Œä¸€äº›æ”¹åŠ¨æ¥ä½¿å¾— Action ç”Ÿæ•ˆã€‚æˆ‘åˆšå¼„å¥½çš„æ—¶å€™ä¼ äº†ä¸€ä¸ªè¡¨æƒ…åŒ…ä¸Šå»ç„¶ååˆ æ‰äº†ï¼ˆ

![](https://raw.githubusercontent.com/yuukoamamiya/pic/master/20210128231609.jpg)

ä¹‹åå†æ›´æ–°æ–°çš„æ–‡ç« å°±ç›´æ¥æŠŠ .md æ–‡ä»¶ä¸Šä¼ åˆ° `\content\post` ç›®å½•ä¸‹å°±æˆï¼Œç”¨ç½‘é¡µä¼ ç”¨å‘½ä»¤è¡Œä¼ ç”¨æ¡Œé¢åº”ç”¨ä¼ éƒ½æ²¡é—®é¢˜ã€‚æ”¹åŠ¨ä¹‹åä¼šè‡ªåŠ¨ç”Ÿæˆè‡ªåŠ¨ç”Ÿæ•ˆã€‚å·²ç»éš¾è¯´å’Œ Gridea å“ªä¸ªæ–¹ä¾¿å“ªä¸ªéº»çƒ¦äº†ã€‚å¯èƒ½é…ç½®è¿‡ç¨‹ä¸­è¿˜æ˜¯ Gridea æ›´åŠ å‚»ç“œå¼ä¸€äº›ï¼Œä½†æ˜¯é…ç½®å¥½ä¹‹åè¿˜æ˜¯è¿™ä¹ˆæ•´æ¯”è¾ƒçœäº‹ã€‚

å°±æ˜¯æ‰‹å†™ Front Matter è¿˜æœ‰ç‚¹éº»çƒ¦ï¼Œè¿™ä¸ªæˆ‘è¿˜å¾—å†ç¢ç£¨ç¢ç£¨ã€‚æ¯”å¦‚è¯´å¯ä»¥è®¾ç½® Front Matter çš„é»˜è®¤æ ¼å¼ï¼Œå†æ¯”å¦‚è¯´å¯ä»¥ç”¨é‚£ç§è‡ªå®šä¹‰çŸ­è¯­çš„è½¯ä»¶æ¥è¾…åŠ©ä¹‹ç±»çš„ï¼Œéƒ½è¿˜å¯ä»¥è¿›ä¸€æ­¥ç ”ç©¶ã€‚



